//- head
meta(charset="UTF-8")
meta(name="viewport", content="width=device-width,initial-scale=1")
title Orders
link(rel="stylesheet", href="/CSS/orders.css")

body
  // HEADER
  header.navbar
    .brand
      a(href="index.html")
        img(src="/Images/mayondo logo.png", alt="Company Logo")
      h2 Mayondo Wood And Furniture
    nav.nav-links
      a(href="sales") CRM
      a(href="analytic") Analytics
      a(href="stafflist") Reports
      // dropdown for accounting
      .dropdown
        .dropdown-content
          a(href="staff") Reports
          //- a(href="expenses.html") Expenses
          //- a(href="cashflow.html") Cash Flow
      a(href="ecommerce") E-commerce
      // replace search with Logout button
      if user
        a(href="#" onclick="showLogoutConfirmation()" class="btn-logout") Logout

  // BODY CONTENT (this will change depending on the page)
  block content

  // Logout Confirmation Modal
  #logoutModal.modal(style="display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5);")
    .modal-content(style="background-color: white; margin: 15% auto; padding: 20px; border-radius: 8px; width: 80%; max-width: 400px; box-shadow: 0 4px 8px rgba(0,0,0,0.2);")
      .modal-header(style="border-bottom: 1px solid #ddd; padding-bottom: 10px; margin-bottom: 15px;")
        h3(style="margin: 0; color: #d9534f;") Confirm Logout
      .modal-body(style="margin-bottom: 20px;")
        p#logoutMessage(style="margin: 0;") Are you sure you want to log out?
      .modal-footer(style="text-align: right;")
        button.btn.btn-danger(type="button", onclick="confirmLogout()") Logout
        button.btn.btn-secondary(type="button", onclick="closeLogoutModal()", style="margin-left: 10px;") Cancel

  // FOOTER
  footer
   
    .footer-bottom
      | Â© 2025 Mayondo wood and furniture. All rights reserved.

  script.
    function showLogoutConfirmation() {
      document.getElementById('logoutModal').style.display = 'block';
    }

    function closeLogoutModal() {
      document.getElementById('logoutModal').style.display = 'none';
    }

    function confirmLogout() {
      // Redirect to logout route which will destroy session and redirect to index
      window.location.href = '/logout';
    }

    // Close modal when clicking outside of it
    window.onclick = function(event) {
      const modal = document.getElementById('logoutModal');
      if (event.target === modal) {
        modal.style.display = 'none';
      }
    }
